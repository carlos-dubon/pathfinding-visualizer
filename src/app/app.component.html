<mat-drawer-container hasBackdrop="true" class="mat--drawer__container">
  <mat-drawer #sidenav mode="push" class="app__sidenav">
    <div class="sidebar__menu">
      <div class="color__header"></div>
      <div class="heading">
        <div class="logo">
          <img src="assets/logo.svg" alt="logo" />
        </div>
        <h1>Pathfinding Visualizer</h1>
        <h3>Carlos Dub√≥n</h3>
      </div>
      <div
        class="item"
        matRipple
        (click)="generateMaze()"
        (click)="sidenav.close()"
        [ngClass]="{
          disabled: searchAnimationInProgress && !searchAnimationIsDone()
        }"
      >
        <mat-icon class="item__icon">casino</mat-icon>
        <p>Generate random maze</p>
      </div>
      <div
        class="item"
        matRipple
        (click)="clearBoard()"
        (click)="sidenav.close()"
        [ngClass]="{
          disabled:
            (searchAnimationInProgress && !searchAnimationIsDone()) ||
            (!wallsPresent() &&
              visitedNodes() == 0 &&
              nodesAreAtStartPosition())
        }"
      >
        <mat-icon class="item__icon">clear</mat-icon>
        <p>Clear board</p>
      </div>
      <div
        class="item"
        matRipple
        (click)="clearWalls()"
        (click)="sidenav.close()"
        [ngClass]="{
          disabled:
            !wallsPresent() ||
            (searchAnimationInProgress && !searchAnimationIsDone())
        }"
      >
        <mat-icon class="item__icon">grid_view</mat-icon>
        <p>Clear walls</p>
      </div>
      <div
        class="item"
        matRipple
        (click)="clearPath()"
        (click)="sidenav.close()"
        [ngClass]="{
          disabled:
            (searchAnimationInProgress && !searchAnimationIsDone()) ||
            !animationIsDone ||
            visitedNodes() == 0
        }"
      >
        <mat-icon class="item__icon">moving</mat-icon>
        <p>Clear path</p>
      </div>
    </div>
  </mat-drawer>
  <mat-drawer-content class="main__app--wrapper">
    <p class="header__toolbar">
      <mat-toolbar color="primary">
        <button *ngIf="this.mobile" mat-icon-button (click)="sidenav.toggle()">
          <mat-icon>menu</mat-icon>
        </button>
        <span *ngIf="!this.mobile" class="header__title"
          >Pathfinding Visualizer</span
        >
        <button
          mat-raised-button
          color="accent"
          class="header__button"
          (click)="start()"
          [disabled]="searchAnimationInProgress && !searchAnimationIsDone()"
        >
          Visualize Dijkstra's!
        </button>
        <button
          *ngIf="!this.mobile"
          mat-raised-button
          class="header__button"
          matTooltip="Uses Prim's algorithm"
          (click)="generateMaze()"
          [disabled]="searchAnimationInProgress && !searchAnimationIsDone()"
        >
          Generate maze
        </button>
        <button
          *ngIf="!this.mobile"
          mat-raised-button
          class="header__button"
          (click)="clearBoard()"
          [disabled]="
            (searchAnimationInProgress && !searchAnimationIsDone()) ||
            (!wallsPresent() &&
              visitedNodes() == 0 &&
              nodesAreAtStartPosition())
          "
        >
          Clear board
        </button>
        <button
          *ngIf="!this.mobile"
          [disabled]="
            !wallsPresent() ||
            (searchAnimationInProgress && !searchAnimationIsDone())
          "
          mat-raised-button
          class="header__button"
          (click)="clearWalls()"
        >
          Clear walls
        </button>
        <button
          *ngIf="!this.mobile"
          mat-raised-button
          class="header__button"
          (click)="clearPath()"
          [disabled]="
            (searchAnimationInProgress && !searchAnimationIsDone()) ||
            !animationIsDone ||
            visitedNodes() == 0
          "
        >
          Clear path
        </button>
        <span class="spacer"></span>
        <button
          *ngIf="!this.mobile"
          matTooltip="Select the speed of the algorithm"
          mat-button
          [matMenuTriggerFor]="menu"
          [disabled]="searchAnimationInProgress && !searchAnimationIsDone()"
        >
          Speed: {{ appSpeed }} <mat-icon>arrow_drop_down</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="setAppSpeed('Normal')">Normal</button>
          <button mat-menu-item (click)="setAppSpeed('Fast')">Fast</button>
        </mat-menu>
        <a href="https://github.com" target="_blank">
          <button mat-button matTooltip="Checkout the GitHub repo">
            <img
              class="github__logo"
              src="https://material.angular.io/assets/img/homepage/github-circle-white-transparent.svg"
              alt="GitHub"
            />
            <span *ngIf="!this.mobile">GitHub</span>
          </button>
        </a>
      </mat-toolbar>
    </p>
    <div class="main__wrapper">
      <div class="main">
        <mat-card class="board__container">
          <div
            #boardEl
            class="board"
            (mousedown)="setMouseDownValue(true)"
            (mouseup)="setMouseDownValue(false)"
            [ngClass]="{
              disabled: searchAnimationInProgress && !searchAnimationIsDone()
            }"
          >
            <div class="row" *ngFor="let row of board; let i = index">
              <div
                class="col"
                *ngFor="let col of board[i]; let j = index"
                (mouseenter)="mouseEnterEvents(col)"
                (mousedown)="mouseDownEvents(col)"
                (mouseleave)="mouseLeaveEvents(col)"
                [ngClass]="{
                  wall: col.type == 2,
                  start: col.type == 3,
                  target: col.type == 4,
                  visited: col.state == 1,
                  path: col.path,
                  arrowPath: col.arrowPath
                }"
              ></div>
            </div>
          </div>
        </mat-card>
        <div class="info">
          <mat-card class="card">
            <p>Visited nodes</p>
            <h1>{{ visitedNodes() }}</h1>
            <mat-progress-bar
              mode="determinate"
              [value]="(visitedNodes() / (rows * cols)) * 100"
            ></mat-progress-bar>
          </mat-card>
          <mat-card class="card">
            <p>Shortest path</p>
            <h1>{{ shortestPathLength() }}</h1>
            <mat-progress-bar
              mode="determinate"
              [value]="(shortestPathLength() / (rows * cols)) * 100"
            ></mat-progress-bar>
          </mat-card>
          <mat-card class="card">
            <h2>Dijkstra's Algorithm</h2>
            <p class="description">
              Dijkstra's algorithm is an algorithm for finding the shortest
              paths between nodes in a graph, which may represent, for example,
              road networks. It was conceived by computer scientist Edsger W.
              Dijkstra in 1956 and published three years later.
            </p>
          </mat-card>
        </div>
      </div>
    </div>
    <router-outlet></router-outlet>
  </mat-drawer-content>
</mat-drawer-container>
